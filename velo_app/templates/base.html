{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="{% static 'flash.png' %}">
    <title>{% block title %}{% endblock title %}</title>
        <script src="https://cdn.tailwindcss.com"></script> 
    </head>
    <body class="bg-[#121212] text-white font-sans">
        <div class="flex fixed h-full">
        <div class="w-64 bg-[#1e1e1e] flex flex-col justify-between p-6">
            <div>
                <div class="flex items-center space-x-2 mb-10">
                    <svg class="h-8 w-8 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                    <span class="text-xl font-bold">Velo</span>
                    <span class="text-xs text-gray-400">Beta</span>
                </div>
                <nav>
                    <ul>
                        <li class="mb-4 hover:bg-gray-700 rounded-lg">
                            <a href="{% url 'home' %}" class="flex items-center space-x-3 text-gray-400 hover:text-white transition-colors duration-200">
                                <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                                </svg>
                                <span>Home</span>
                            </a>
                        </li>
                        <li class="mb-4 hover:bg-gray-700 rounded-lg {% if request.path == '/dashboard/' %}bg-gray-700{% endif %}">
                            <a href="{% url 'dashboard' %}" class="flex items-center space-x-3 text-gray-400 hover:text-white transition-colors duration-200 {% if request.path == '/dashboard/' %}text-white{% endif %}">
                                <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8z"></path>
                                </svg>
                                <span>Dashboard</span>
                            </a>
                        </li>
                        <li class="mb-4 hover:bg-gray-700 rounded-lg {% if request.path == '/activities/' %}bg-gray-700{% endif %}">
                            <a href="{% url 'activities' %}" class="flex items-center space-x-3 text-gray-400 hover:text-white transition-colors duration-200 {% if request.path == '/activities/' %}text-white{% endif %}">
                                <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                                </svg>
                                <span>Activities</span>
                            </a>
                        </li>
                        <li class="mb-4 hover:bg-gray-700 rounded-lg {% if request.path == '/analytics/' %}bg-gray-700{% endif %}">
                            <a href="{% url 'analytics' %}" class="flex items-center space-x-3 text-gray-400 hover:text-white transition-colors duration-200 {% if request.path == '/analytics/' %}text-white{% endif %}">
                                <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 8v8m-4-2v2m-4-6v6M4 20h16a2 2 0 002-2V6a2 2 0 00-2-2H4a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                <span>Analytics</span>
                            </a>
                        </li>
                        <li class="mb-4 hover:bg-gray-700 rounded-lg {% if request.path == '/challenges/' %}bg-gray-700{% endif %}">
                            <a href="{% url 'challenges' %}" class="flex items-center space-x-3 text-gray-400 hover:text-white transition-colors duration-200 {% if request.path == '/challenges/' %}text-white{% endif %}">
                                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#9c9c9cff"><path d="M480-390Zm-132-53 55 37 77-39 77 39 53-35-40-79H386l-38 77ZM209-160h541L646-369l-83 55-83-41-83 41-85-56-103 210ZM80-80l234-475q10-20 29.5-32.5T386-600h54v-280h280l-40 80 40 80H520v120h50q23 0 42 12t30 32L880-80H80Z"/></svg>
                                <span>Challenges</span>
                            </a>
                        </li>
                        <li class="mb-4 hover:bg-gray-700 rounded-lg">
                            <a href="{% url 'about' %}" class="flex items-center space-x-3 text-gray-400 hover:text-white transition-colors duration-200">
                                <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <span>About</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                
                
            </div>
            <div class="flex items-center space-x-3 p-3 bg-gray-800 rounded-lg">
            <div class="relative">
                <a href="{% url 'profile' %}" class="hover:text-gray-400">
                    {% if profile.profile_picture %}
          <img class="h-32 w-32 rounded-full object-cover border-4 border-white shadow" 
               src="{{ profile.profile_picture.url }}" 
               alt="{{ user.username }} profile picture">
        {% else %}
          <div class="bg-gray-200 border-2 border-dashed rounded-full w-10 h-10 flex items-center justify-center">
            <span class="text-gray-500 text-3xl">{{ user.username|first|upper }}</span>
          </div>
        {% endif %}

            </div>
            <div>
                <span class="block text-sm font-semibold">
                    {{ user.username }}
                </span>
            </div>
        </a>
        <svg class="h-5 w-5 text-gray-400 ml-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
    </svg>
        </div>
        </div>
    </div>
    <div class="ml-64 p-6 min-h-screen">
    {% block content %}{% endblock %}
    </div>

    {% if messages %}
    <div id="message-container" class="fixed top-4 right-4 z-50 w-full max-w-sm space-y-3">
        {% for message in messages %}
            <div class="js-fade-message
                        p-4 rounded-md shadow-lg
                        opacity-100 h-auto py-4 my-4 border
                        transition-all duration-800 ease-out overflow-hidden
                        alert alert-{% if message.tags == 'error' or message.tags == 'danger' %}
                            inline-flex bg-red-100 text-red-800 border-red-300
                        {% elif message.tags == 'success' %}
                            inline-flex bg-green-100 text-green-800 border-green-300
                        {% elif message.tags == 'info' %}
                            inline-flex bg-blue-100 text-blue-800 border-blue-300
                        {% elif message.tags == 'warning' %}
                            inline-flex bg-yellow-100 text-yellow-800 border-yellow-300
                        {% endif %}
                        " role="alert">
                {{ message }}
            </div>
        {% endfor %}
    </div>
{% endif %}
      <script>
        document.addEventListener('DOMContentLoaded', function() {
            const messageContainer = document.getElementById('message-container');
            if (messageContainer) {
                // Get all individual message divs within the container
                const messages = messageContainer.querySelectorAll('[role="alert"]');

                messages.forEach(message => {
                    // Set a timeout to start the fade-out
                    setTimeout(() => {
                        message.style.opacity = '0'; // Start CSS transition for fade-out
                        // After the transition, remove the element from the DOM
                        message.addEventListener('transitionend', function() {
                            message.remove();
                        }, { once: true }); // Ensure listener runs only once
                    }, 5000); // 5 seconds
                });
            }
        });
    </script>
    </body>
</html>